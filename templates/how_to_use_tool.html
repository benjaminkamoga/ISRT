<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ISRT Notes & Premise Data Page – Full</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    /* ===== Card & Titles ===== */
    .note-card {
      max-width: 1200px;
      margin: 0 auto 40px;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      background-color: #ffffff;
    }
    .note-title {
      color: #28a745;
      font-weight: 700;
      margin-bottom: 20px;
    }
    ul, ol { margin-left: 20px; }

    /* ===== Images ===== */
    img {
      width: 100%;
      border-radius: 8px;
      border: 1px solid #ddd;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      object-fit: cover;
    }

    /* ===== Sections ===== */
    .content-section {
      display: flex;
      gap: 30px;
      margin-bottom: 25px;
    }
    .content-section .image-half { flex:1; }
    .content-section .text-half { flex:1; }

    .workflow-section { margin-top:20px; margin-bottom:30px; }
    .section-spacing { margin-top:25px; margin-bottom:25px; }

    /* ===== Premise Inspection Buttons ===== */
    .button-section {
      display: flex;
      gap: 30px;
      align-items: flex-start;
      flex-wrap: nowrap;
      margin-bottom:25px;
    }
    .button-section.row-reverse { flex-direction: row-reverse; }
    .button-section img.large-img {
      flex: 1;
      max-width: 400px;
      object-fit: cover;
    }
    .button-section .description {
      display: flex;
      flex-direction: column;
      flex: 1;
      min-width: 200px;
    }

    /* Small icons & Roman label */
    .small-icon { width: 120px; height:40px; border-radius:5px; object-fit: cover; border:1px solid #ddd; margin-left:5px; }
    .roman-label { font-weight:bold; color:#333; font-size:16px; margin-right:6px; }

    .comment { font-style:italic; color:#555; margin-bottom:20px; }

    /* ===== Normal Inspection Cards ===== */
    .horizontal-cards { display:flex; flex-wrap:wrap; gap:20px; margin-top:20px; }
    .horizontal-card { flex:1; min-width:250px; padding:20px; border-radius:12px; background:#f0f0f0; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .roman-title { font-weight:600; margin-bottom:10px; }

    /* ===== Header Section ===== */
    .header-section { display:flex; gap:20px; align-items:flex-start; }
    .header-text { flex:1; }
    .header-image-large { flex:3; }
    .header-image-small { flex:1; }
    .main-body { margin-top:30px; }

    /* ===== Flow Steps ===== */
    .flow-step-container {
      display:flex;
      justify-content: space-between;
      gap:20px;
      flex-wrap: wrap;
      margin-top:20px;
    }
    .flow-step {
      flex:1 1 200px;
      text-align:center;
      padding:20px;
      border-radius:50px;
    }

    /* ===== Premise Data Page Styles ===== */
    .intro-text { text-align: justify; color: #555; font-size: 1rem; margin-bottom: 20px; }
    .premises-image { display: block; width: 100%; height: auto; margin-bottom: 30px; border-radius: 10px; border: 1px solid #ddd; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
    .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
    .feature-card { background: #f0f0f0; border-radius: 12px; padding: 20px; text-align: center; box-shadow: 0 2px 6px rgba(0,0,0,0.1); transition: transform .2s; }
    .feature-card:hover { transform: translateY(-5px); }
    .feature-icon { font-size: 36px; margin-bottom: 10px; }
    .feature-title { font-weight: 600; font-size: 1.1rem; margin-bottom: 8px; color: #007bff; }
    .flow-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap: 20px; margin-top: 30px; }
    .flow-step-number { width: 40px; height: 40px; border-radius: 50%; background: #28a745; color: #fff; font-weight: 700; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; }
    .image-gallery { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 40px; }
    .image-left { grid-row: span 2; display: flex; flex-direction: column; justify-content: flex-end; }
    .descriptive-card { background: #f0f0f0; padding: 20px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); flex: 1; margin-bottom: 15px; }
    .image-gallery img { width: 100%; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.15); border: 1px solid #ddd; transition: transform .2s ease-in-out; cursor: pointer; }
    .image-gallery img:hover { transform: scale(1.05); }

    /* Responsive */
    @media (max-width:768px) {
      .content-section, .button-section { flex-direction: column; }
      .button-section img.large-img { max-width:100%; margin-top:15px; }
      .small-icon { width:100px; height:35px; }
      .horizontal-cards { flex-direction: column; }
      .image-gallery { grid-template-columns: 1fr; }
      .image-left { grid-row: auto; }
    }
  </style>
</head>
<body>


  <!-- ===== LOGIN PAGE ===== -->
<div class="note-card">
  <h3 class="note-title">Login Page</h3>
  <p><strong>Purpose:</strong> Allows registered users to access the application securely.</p>
  <div class="content-section">
    <div class="text-half">
      <p><strong>Key Components:</strong></p>
      <ul>
        <li><strong>Username Field:</strong> Enter the registered username.</li>
        <li><strong>Password Field:</strong> Enter the account password.</li>
        <li><strong>Login Button:</strong> Submits credentials for authentication.</li>
        <li><strong>Flash Messages:</strong> Displays success or error messages after login attempts.</li>
      </ul>
      <p><strong>Workflow / Instructions:</strong></p>
      <ol>
        <li>Enter your username in the username field.</li>
        <li>Enter your password in the password field.</li>
        <li>Click <strong>Login</strong> to proceed.</li>
        <li>If credentials are invalid, an error message will appear.</li>
        <li>Upon successful login, the user is redirected to the dashboard.</li>
      </ol>
    </div>
    <div class="image-half">
      <img src="{{ url_for('static', filename='images/notes/login.png') }}" alt="Login Page Screenshot">
    </div>
  </div>
</div>

<!-- ===== DASHBOARD ===== -->
<div class="note-card">
  <h3 class="note-title">Dashboard</h3>
  <div class="subheading" style="font-weight: normal;">
    Purpose: The Dashboard provides a central hub for users to navigate the ISRT, view maps, and access different modules based on user roles.
  </div>
  <div class="content-section">
    <div class="image-half">
      <img src="{{ url_for('static', filename='images/notes/dashboard1.png') }}" alt="Dashboard Screenshot">
    </div>
    <div class="text-half">
      <p><strong>Key Components:</strong></p>
      <ul>
        <li><strong>Sidebar:</strong> Navigation menu for all modules.</li>
        <li><strong>Welcome Message:</strong> Personalized greeting with username.</li>
        <li><strong>Map Container:</strong> Main map showing inspections.</li>
        <li><strong>Profile Picture:</strong> Clickable avatar for user.</li>
        <li><strong>Create User Modal:</strong> Admin function for new accounts.</li>
      </ul>
    </div>
  </div>
  <div class="workflow-section">
    <p><strong>Workflow / Instructions:</strong></p>
    <ol>
      <li>Use the Sidebar to navigate modules.</li>
      <li>Click profile picture to change Picture.</li>
      <li>Admins can open "Create New User" modal to add accounts.</li>
    </ol>
  </div>

  <!-- ===== Premise Inspection ===== -->
  <div class="subheading section-spacing">
    1. Premise Inspection
    <img src="{{ url_for('static', filename='images/notes/premiseinspection.png') }}" alt="Premise Inspection" class="small-icon">
  </div>

   
        <li>Manage inspection activities efficiently with two options tailored for your workflow.</li>
        <li>This is the dedicated section for entering raw inspection data, which will be used to generate accurate and comprehensive inspection summaries.</li>
  
  <div class="button-section">
    <div class="description">
      <span class="roman-label">I.</span>
      <img src="{{ url_for('static', filename='images/notes/newinspection.png') }}" alt="New Inspection Icon" class="small-icon">
      <p><strong>New Inspection:</strong> The New Inspection (Day One Inspection) Form is used to capture all essential details at the start of a new inspection session. Selecting this will open a form to capture general information such as inspection type, region, and district and initial findings. This form serves as the foundation for building the complete inspection record.</p>
    </div>
    <img src="{{ url_for('static', filename='images/notes/dashboard2.png') }}" alt="New Inspection Screenshot" class="large-img">
  </div>

  <div class="button-section row-reverse">
    <div class="description">
      <span class="roman-label">II.</span>
      <img src="{{ url_for('static', filename='images/notes/continuepreviousinspection.png') }}" alt="Continue Previous Inspection Icon" class="small-icon">
      <p><strong>Continue Previous Inspection:</strong> This option takes you back to an unfinished inspection. The general information is already pre-filled, allowing you to continue exactly where you left off. ie the continuation of inspection for day 2,3... .The daily data entered via this form will be aegated to the same inspenction.</p>
    </div>
    <img src="{{ url_for('static', filename='images/notes/dashboard3.png') }}" alt="Continue Inspection Screenshot" class="large-img">
  </div>

  <div class="comment">
    After confirming on both models, the inspection form will be opened so you can proceed seamlessly to fill th inspection summary of such particular date.
  </div>
  <p><em>*This design ensures that both new and ongoing inspections are easy to handle, organized, and free from duplication.</em></p>
</div>

<!-- ===== Normal Inspection ===== -->
<div class="note-card">
  <h3 class="note-title">INSPECTION FORM</h3>
</strong> The Inspection Form is used to record detailed summary during premise inspections. It captures essential data such as premise details, inspection type, inspected products(for recall), Observations identified and charges & value of confiscated products. The form ensures that all inspection activities are accurately documented, providing a reliable basis for reporting and  analysis. Different form will be opened depending on type of inspection chosen on start.</p>

  <h3 class="note-title">A:Routine, Special, Follow-up, and Medical Device Inspections</h3>
  </strong> The form consist of Header and Main Body.</p>
  <div class="sub-section">A: Header</div>
  <div class="header-section">
    <div class="header-text">
      <ul style="margin:0; padding-left:20px;">
        <li>Pre-filled data: Inspection Type, Region, District.</li>
        <li>Popup calendar to select inspection date (future dates restricted)</li>
      </ul>
    </div>
    <div class="header-image-large">
      <img src="{{ url_for('static', filename='images/notes/header.png') }}" alt="Header Screenshot">
    </div>
    <div class="header-image-small">
      <img src="{{ url_for('static', filename='images/notes/calender.png') }}" alt="Calendar Screenshot">
    </div>
  </div>

  <div class="main-body">
    <div class="sub-section">B: Main Body</div>
    <p>Below are the key sections of the inspection form:</p>
    <div class="horizontal-cards">
      <div class="horizontal-card">
        <div class="roman-title">I. Premises Inspected</div>
        <p>List of premise categories with input for premises inspected. For each category with inspected premises, the system prompts:
          <ul>
            <li>No → counts as no observation</li>
            <li>Yes → opens predefined observation form where user enters number of premises affected(with obbservation(s))</li>
          </ul>
        </p>
      </div>
      <div class="horizontal-card">
        <div class="roman-title">II. Total Charges & Confiscated Product</div>
        <p>This section allows the inspector to enter:
          <ul>
            <li>Total Charges for the inspected premises.</li>
            <li>Value of any confiscated products.</li>
          </ul>
        </p>
      </div>
      <div class="horizontal-card">
        <div class="roman-title">III. Buttons</div>
        <p>The inspector can use the following buttons:
          <ul>
            <li>Save – records the day’s data; inspection can continue the next day.</li>
            <li>Save & End – closes the inspection; no further entries allowed.</li>
            <li>Back to Dashboard – returns to the main dashboard.</li>
          </ul>
        </p>
      </div>
    </div>


    <!-- Sample Models Images -->
    <div style="margin-top:25px;">
      <h5>Sample Models</h5>
      <div class="d-flex gap-3 flex-wrap">
        <div style="flex:1; min-width:200px;">
          <img src="{{ url_for('static', filename='images/notes/category.png') }}" alt="Premise Category">
        </div>
        <div style="flex:1; min-width:200px;">
          <img src="{{ url_for('static', filename='images/notes/observation.png') }}" alt="Observation Form">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== Recall Inspection ===== -->
<div class="note-card">
  <h3 class="note-title">B:ecall Inspection Form</h3>
  <p>The Recall Inspection Form is used to record inspections where recalled products are involved. It has same and additional features as compared to Normal inspections. Follow these steps:</p>

  <div class="flow-step-container">
    <div class="flow-step" style="border:2px solid #007bff; color:#007bff;">
      <div style="font-size:18px; font-weight:700;">Step 1</div>
      <h6>Add Recalled Product(s)</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Click “Add Recalled Product”.</li>
        <li>Fill in required details (name, batch/lot, etc.).</li>
        <li>Can add multiple products/batches.</li>
        <li>Premise inspection cannot be entered until this is done.</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #28a745; color:#28a745;">
      <div style="font-size:18px; font-weight:700;">Step 2</div>
      <h6>Enter Inspected Premises</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Enter number of premises per category.</li>
        <li>If none, leave as zero.</li>
        <li>For each category with inspected premises,proceed step 3.</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #ffc107; color:#ffc107;">
      <div style="font-size:18px; font-weight:700;">Step 3</div>
      <h6>Record Recall Findings</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>System asks: “Were recalled products found in this category?”</li>
        <li>No → zero recall findings.</li>
        <li>Yes → select product(s), enter quantity & premises affected.</li>
        <li>Input cannot exceed inspected premises.</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #dc3545; color:#dc3545;">
      <div style="font-size:18px; font-weight:700;">Step 4</div>
      <h6>Value of Recalled Products</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Enter value of such recalled product(Tsh).</li>
        <li>System auto-populates totals for all premises in real-time for preview.</li>
      </ul>
    </div>
  </div>

  <!-- Sample Models Images -->
  <div style="margin-top:25px;">
    <h5>Sample Models</h5>

    <div class="d-flex gap-3 flex-wrap">
      <div style="flex:1; min-width:200px;">
        <img src="{{ url_for('static', filename='images/notes/recall2.png') }}" alt="Recall Sample 1">
      </div>
      <div style="flex:1; min-width:200px; display:flex; flex-direction:column; gap:20px;">
        <img src="{{ url_for('static', filename='images/notes/recall3.png') }}" alt="Recall Sample 2">
        <h6 style="margin-top:0; font-weight:600;">Note: The continuation form (Day 2… of inspection) will have already Recalled Product(s) just for reference(as shown in below sample image). User has to follow same Steps.</h6>
        <img src="{{ url_for('static', filename='images/notes/recall4.png') }}" alt="Recall Continuation Note">
      </div>
    </div>
  </div>
</div>

<!-- ===== POE Inspection ===== -->
<div class="note-card">
  <h3 class="note-title">C:Port of Entry (POE) Inspection Form</h3>
  <p>The Port of Entry inspection form is designed to capture inspections conducted at border points, airports, seaports, or other entry locations.</p>

  <div class="flow-step-container">
    <div class="flow-step" style="border:2px solid #007bff; color:#007bff;">
      <div style="font-size:18px; font-weight:700;">Step 1</div>
      <h6>Enter General Details</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Select or type Port Name.</li>
        <li>Choose Date of Inspection (future dates restricted).</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #28a745; color:#28a745;">
      <div style="font-size:18px; font-weight:700;">Step 2</div>
      <h6>Confiscated Products</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>System asks if any products were confiscated.</li>
        <li>No → continue.</li>
        <li>Yes → select products and enter corresponding value.</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #ffc107; color:#ffc107;">
      <div style="font-size:18px; font-weight:700;">Step 3</div>
      <h6>Charges</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Enter total charges related to inspection.</li>
      </ul>
    </div>
    <div class="flow-step" style="border:2px solid #dc3545; color:#dc3545;">
      <div style="font-size:18px; font-weight:700;">Step 4</div>
      <h6>Save Inspection</h6>
      <ul style="text-align:left; margin-left:15px;">
        <li>Click Save to record inspection immediately.</li>
        <li>POE inspections are one-time entries and cannot be resumed later.</li>
      </ul>
    </div>
  </div>

  <div style="margin-top:20px; font-weight:600; color:#333;">
    ✅ Key Points to Remember
    <ul>
      <li>Port name and inspection date are mandatory.</li>
      <li>Confiscated product values must match the products selected.</li>
      <li>POE inspections are single-entry forms, no resume option.</li>
    </ul>
  </div>
</div>




<div class="note-card">
  <!-- Title & Intro -->
  <h3 class="note-title">Premise Data Page – Overview & Key Features</h3>
  <p class="intro-text">
    The <strong>Premise Data Page</strong> provides a structured database of all registered premises,
    serving as the foundation for inspections, reporting, and analysis.
    It enables users to efficiently view, filter, update, and manage premise records while supporting
    accurate data-driven decision-making.
  </p>

  <!-- Premises Image -->
<img src="{{ url_for('static', filename='images/notes/premises.png') }}"
     alt="Premises Overview"
     class="premises-image">


  <!-- Features Grid -->
  <div class="feature-grid">

    <!-- Premise Records -->
    <div class="feature-card">
      <div class="feature-icon">🏢</div>
      <div class="feature-title">Premise Records</div>
      <div>View all premises with name, category, location, VR, and actions.</div>
    </div>

    <!-- Filters & Search -->
    <div class="feature-card">
      <div class="feature-icon">🔍</div>
      <div class="feature-title">Filters & Search</div>
      <div>Filter by Region, District, Category, VR Type, Physical Location, or search by name.</div>
    </div>

    <!-- Add / Edit Premises -->
    <div class="feature-card">
      <div class="feature-icon">➕</div>
      <div class="feature-title">Add / Edit Premises</div>
      <div>Add new or edit existing premises quickly through modals.</div>
    </div>

    <!-- Observations -->
    <div class="feature-card">
      <div class="feature-icon">📊</div>
      <div class="feature-title">Observations</div>
      <div>Record inspections, defects, dates, and monetary values.</div>
    </div>

    <!-- Map View -->
    <div class="feature-card">
      <div class="feature-icon">🗺️</div>
      <div class="feature-title">Map View</div>
<div style="text-align: left;">
    Visualize premises on a map for easy reference. Two types of maps can be generated:
    one showing the specific premise location, and another displaying the ward-level premises distribution.
</div>

    </div>

    <!-- Cart -->
    <div class="feature-card">
      <div class="feature-icon">🛒</div>
      <div class="feature-title">Cart</div>
      <div style="text-align: left;">
    This shows the number of premises (per category) which either have observations but no summary generated for them (-No),
    or have a summary but no observation per premise (+No). Click to view popup.
</div>

    </div>

    <!-- Export -->
    <div class="feature-card">
      <div class="feature-icon">📥</div>
      <div class="feature-title">Export</div>
      <div>Download filtered premises list as Excel file.</div>
    </div>

    <!-- Intensity Cards -->
<div class="feature-card">
  <div class="feature-icon">🟥</div>
  <div class="feature-title">Intensity Cards</div>
  <div>This provide quick premise status alert for inspectors.Refer how calculation work for card definition</div>
</div>


  </div>

 <!-- ===== How to Use – Rounded Rectangular Cards ===== -->
<div class="note-card" style="margin-top:40px; padding:30px; background:#f8f9fa; border-radius:15px;">
  <div class="sub-section" style="font-weight:700; font-size:1.4rem; color:#2c3e50; margin-bottom:30px;">
    🧭 How to Use 
  </div>

  <div class="flow-container" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center; align-items:center;">

    <!-- Step 1 -->
    <div class="flow-step" style="background:#3498db; color:#fff; padding:15px 20px; border-radius:15px; min-width:180px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      <div style="font-weight:700; font-size:1.2rem;">1</div>
      <div style="margin-top:8px; font-size:0.95rem;">Filter Premises: By Region → District → Category → VR Type or by searching.</div>
    </div>

    <div style="align-self:center; font-size:1.8rem; color:#888;"> </div>

    <!-- Step 2 -->
    <div class="flow-step" style="background:#1abc9c; color:#fff; padding:15px 20px; border-radius:15px; min-width:180px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      <div style="font-weight:700; font-size:1.2rem;">2</div>
      <div style="margin-top:8px; font-size:0.95rem;">Add Premise: Fill in details, Save or Cancel.</div>
    </div>

    <div style="align-self:center; font-size:1.8rem; color:#888;"> </div>

    <!-- Step 3 -->
    <div class="flow-step" style="background:#f39c12; color:#fff; padding:15px 20px; border-radius:15px; min-width:180px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      <div style="font-weight:700; font-size:1.2rem;">3</div>
      <div style="margin-top:8px; font-size:0.95rem;">Edit/Delete Premises using Actions column.</div>
    </div>

    <div style="align-self:center; font-size:1.8rem; color:#888;"> </div>

    <!-- Step 4 -->
    <div class="flow-step" style="background:#9b59b6; color:#fff; padding:15px 20px; border-radius:15px; min-width:180px; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      <div style="font-weight:700; font-size:1.2rem;">4</div>
      <div style="margin-top:8px; font-size:0.95rem;">Add Observations: Select date & Observation identified → Save.</div>
    </div>

    <div style="align-self:center; font-size:1.8rem; color:#888;">➡️</div>

    <!-- Step 5 -->
    <!-- Step 5 -->
<div class="flow-step" style="background:#e74c3c; color:#fff; padding:15px 20px; border-radius:15px; min-width:180px; box-shadow:0 4px 12px rgba(0,0,0,0.1); text-align:left;">
  <div style="font-weight:700; font-size:1.2rem;">5</div>
  <div style="margin-top:8px; font-size:0.95rem;">
    View Observations(Eye icon): See historical Observations  data. ie the model telling user on certain date premise was identified with the following observations...
  </div>
  
  <div style="margin-top:8px; font-size:0.95rem;">
    Note:The + symbol on map column allow user to set location, after confirmig it will change to location icon which on click it will open the map where user can navigate toward such location.The green show map button will allow user to see geographical distribution of multiple  premises across certain location(ward).
  </div>
</div>


  </div>
</div>


  <!-- Existing 3-Image Gallery -->
<div class="image-gallery">
  <div class="image-left d-flex flex-column justify-content-between">
    <!-- Descriptive Card -->
<div class="feature-card descriptive-card">
  <div class="feature-title">Description</div>
  <div style="font-size: 0.95rem; line-height: 1.6; color: #333; text-align: left;">
    <ul style="margin-left: 15px; padding-left: 15px; list-style-type: disc;">
      <li>
        <strong>Map Premise Status:</strong>
        Each location icon on the distribution map is color-coded based on the <b>conformity status</b> of a premise:
        <ul style="margin-top: 5px; margin-bottom: 5px; list-style-type: circle;">
          <li><span style="color: #2ecc71; font-weight: bold;">Green</span> → Clean premise</li>
          <li><span style="color: #3498db; font-weight: bold;">Blue</span> → Low-risk premise</li>
          <li><span style="color: #f1c40f; font-weight: bold;">Yellow</span> → Moderate-risk premise</li>
          <li><span style="color: #e74c3c; font-weight: bold;">Red</span> → Non-conforming / high-risk premise</li>
          <li><span style="color: #ffffff; background-color:#000; padding:2px 4px; border-radius:3px;">White</span> → No status available</li>
        </ul>
      </li>

      <li>
        <strong>Concentration-Based Planning:</strong>  
        Depending on the <b>color concentration</b> in an area, inspectors can plan their route and focus on targeted premises first.
      </li>

      <li>
        <strong>Premise Location Capture:</strong>  
        When recording a premise's location, stay in an <b>open space</b> (outside the building) and wait until the GPS confirmation status appears.
      </li>
    </ul>
  </div>
</div>

    <!-- Left Image (Map) -->
    <img src="{{ url_for('static', filename='images/notes/map.png') }}" alt="Map View">
  </div>

  <!-- Right Images -->
  <div>
    <img src="{{ url_for('static', filename='images/notes/addobservation.png') }}" alt="Add Observation">
  </div>
  <div>
    <img src="{{ url_for('static', filename='images/notes/viewobservations.png') }}" alt="View Observations">
  </div>
</div>

<!-- Wide Map2 Image with Description -->
<div style="margin-top: 30px;">
  <p style="font-weight:600; font-size:1rem; color:#333; margin-bottom:10px;">
    The below sample map shows how a user can navigate toward a premise location; 
    the red location icon indicates the premise location, and the blue dots show a direction from the user's position toward that premise.
  </p>
  <img src="{{ url_for('static', filename='images/notes/map2.png') }}" 
       alt="Map 2 View" 
       style="width:100%; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd;">
</div>


        <!-- Section Header -->
<h2 style="text-align:center; margin-top:40px; margin-bottom:20px; font-size:1.5rem; font-weight:bold;">
  HOW OBSERVATION AND CALCULATION WORK
</h2>

<!-- Observations & Calculations: Balanced Three Cards -->
<div style="display:flex; gap:20px; flex-wrap:wrap; margin-top:20px;">
   
  <!-- Card 1 -->
  <div class="feature-card" style="flex:1; min-width:300px; padding:15px; border:1px solid #ddd; border-radius:8px; text-align:left;">
    <div class="feature-title" style="font-size:1.2rem; margin-bottom:10px;">Observations & NCI</div>
    <p>When you record an observation for a premise, the system automatically calculates several metrics that help you understand the level of compliance and risk for that premise. Here’s how it works:</p>

    <h6 style="font-weight:bold;">1. Recording Observations</h6>

    <ul>
      <li>For each premise, you can add observations on a specific date.</li>
      <li>Observations include checking for defects such as GOT Medicines, Unregistered Medicines, No Qualified Personnel, and other issues.</li>
      <li>Some observations allow you to enter a monetary value in Tanzanian Shillings (Tsh) to quantify the severity.</li>
      <li>If no issues are found, you can select “None”, and the system treats this observation as having no defects.</li>
    </ul>

    <h6><strong>2. Non-Conformance Intensity</strong></h6>
    <p>Each type of observation has a predefined intensity value that represents how serious the issue is. The total intensity for an observation is calculated as the sum of intensity values of all selected observations:</p>
    <p><strong>Total Intensity = ∑(Intensity of each selected defect)</strong></p>
    <p>Observations marked as “None” automatically have an intensity of 0.</p>

    <h6><strong>3. Intensity Cards</strong></h6>
    <p>Each premise has an Intensity Card, which provides a quick visual indicator of compliance level. The card color is based on the latest observations and average intensity:</p>
    <ul>
      <li>White → No Inspection for that premise</li>
      <li>Green → clean, low risk</li>
      <li>Blue → low to moderate intensity</li>
      <li>Yellow → moderate intensity</li>
      <li>Red → high intensity or critical Observations present</li>
    </ul>
    <p>NOTE:If during last inspection conducted the premise was found with either GOT/UNREGISTERED PRODUCTS the system will show RED card even if the avarage intesty is moderate.</p>
  <h6><strong>4. Introduction to PVI</strong></h6>

    <ul>
      <li><strong>NCI (Non-Conformance Intensity):</strong> Measures the severity of inspection observations.</li>
      <li><strong>PVI (Product Violation Index):</strong> Measures the scale and importance of product-related violations.</li>
    </ul>
    <p>While NCI focuses on how bad the observation identified  are, PVI captures how big and impactful the violations are.</p>

  </div>

  <!-- Card 2 -->
  <div class="feature-card" style="flex:1; min-width:300px; padding:15px; border:1px solid #ddd; border-radius:8px; text-align:left;">
    

    
    <h6><strong>Why PVI is Needed</strong></h6>
    <ul>
      <li>NCI measures severity but ignores the scale of violations.</li>
      <li>Two premises may have equally “high-severity” findings, but:
        <ul>
          <li>One might have thousands of unregistered or diverted products.</li>
          <li>The other might have only a few.</li>
        </ul>
      </li>
      <li>PVI addresses this gap by combining:
        <ul>
          <li>Policy Magnitude/Weight of violating product.</li>
          <li>Actual value of  each product type.</li>
        </ul>
      </li>
    </ul>

    <h6><strong>(Example) Policy Weights for PVI</strong></h6>
    <table border="1" cellpadding="6" cellspacing="0" style="width:100%; border-collapse:collapse;">
      <thead style="border:1px solid #000;">
        <tr>
          <th style="border:1px solid #000;">Product Type</th>
          <th style="border:1px solid #000;">Weight (%)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="border:1px solid #000;">Government Products</td>
          <td style="border:1px solid #000;">40%</td>
        </tr>
        <tr>
          <td style="border:1px solid #000;">Unregistered Products</td>
          <td style="border:1px solid #000;">40%</td>
        </tr>
        <tr>
          <td style="border:1px solid #000;">DLDM (Not Allowed)</td>
          <td style="border:1px solid #000;">20%</td>
        </tr>
      </tbody>
    </table>

   <h6 style="font-weight:bold; margin-top:20px;">Calculating PVI</h6>

    <p><strong>PVIraw = (0.4 × Vgov) + (0.4 × Vunreg) + (0.2 × Vdldm)</strong></p>
    <p>Where:<br>• Vgov = Value of government product violations<br>• Vunreg = Value of unregistered product violations<br>• Vdldm = Value of DLDM violations</p>

    <h6 style="font-weight:bold; margin-top:15px;">5.Understanding Absolute PVI and Relative PVI</h6>

<h6 style="font-weight:bold;">Absolute PVI (Policy PVI)</h6>
<ul>
  <li>Absolute PVI expresses a premise’s level of product violations as a percentage of  Zone or policy-defined maximum.</li>
  <li>It measures how a premise performs against the standards or thresholds set by Zone, not against other premises.</li>
  <li>This approach is stable over time, as it does not fluctuate when new observations are added.</li>
  <li>Absolute PVI allows regulators to assess compliance consistently across districts, premises, or periods, providing a clear benchmark for policy enforcement.</li>
  <li>It is especially useful for long-term monitoring and comparing performance to expected maximum limits.</li>
</ul>

<h6 style="font-weight:bold;">Relative PVI (Observed Maximum PVI)</h6>
<ul>
  <li>Relative PVI expresses a premise’s level of product violations as a percentage of the highest violation observed in the dataset.</li>
  <li>It shows how a premise compares to others in the same inspection period, District,Region or dataset.</li>
  <li>This approach is dynamic, meaning percentages change if a new premise with higher violations is added.</li>
  <li>Relative PVI is useful for ranking and identifying top or low-violating premises or Districts.</li>
  <li>It highlights current relative risk, but may not reflect absolute compliance with Zone standards.</li>
</ul>

   
  </div>

  <!-- Card 3 -->
  <div class="feature-card" style="flex:1; min-width:300px; padding:15px; border:1px solid #ddd; border-radius:8px; text-align:left;">
 <h6><strong>6. Converting PVI to Percentages</strong></h6>

    <p><strong>PVI%relative = (PVIraw / Max(PVIraw)) × 100</strong><br>Purpose: Shows how a premise ranks compared to the worst observed case.</p>
    <p><strong>PolicyMax = (0.4 × Vgovmax) + (0.4 × Vunregmax) + (0.2 × Vdldmmax)</strong><br><strong>PVI%Absolute = (PVIraw / PolicyMax) × 100</strong><br>Purpose: Shows compliance relative to regulatory thresholds.</p>
    <h6><strong>7. Illustrative Example</strong></h6>
    <p>7.1 Raw PVI Calculation:</p>
    <table border="1" cellpadding="6" cellspacing="0" style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th style="border:1px solid #000;">Premise</th>
          <th style="border:1px solid #000;">Gov (Tsh)</th>
          <th style="border:1px solid #000;">Unreg (Tsh)</th>
          <th style="border:1px solid #000;">DLDM (Tsh)</th>
          <th style="border:1px solid #000;">PVIraw</th>
        </tr>
      </thead>
      <tbody>
        <tr><td style="border:1px solid #000;">Aba Pharmacy</td><td style="border:1px solid #000;">5,000</td><td style="border:1px solid #000;">0</td><td style="border:1px solid #000;">0</td><td style="border:1px solid #000;">2,000</td></tr>
        <tr><td style="border:1px solid #000;">Beta Pharmacy</td><td style="border:1px solid #000;">20,000</td><td style="border:1px solid #000;">10,000</td><td style="border:1px solid #000;">0</td><td style="border:1px solid #000;">12,000</td></tr>
        <tr><td style="border:1px solid #000;">Chole Pharmacy</td><td style="border:1px solid #000;">30,000</td><td style="border:1px solid #000;">20,000</td><td style="border:1px solid #000;">5,000</td><td style="border:1px solid #000;">23,500</td></tr>
      </tbody>
    </table>

   <h6 style="font-weight:bold; margin-top:20px;">Why Observed vs Policy PVI Differ</h6>
    <ul>
      <li>Policy PVI (%): Uses a fixed regulatory threshold (68,000).</li>
      <li>Observed PVI (%): Uses the highest observed value in the dataset (23,500).</li>
      <li>Example: Beta Pharmacy → Relative PVI = 51.1%, Policy PVI = 17.6%</li>
    </ul>

    <h6><strong>8. Violation Rate Calculation</strong></h6>
  <p>
<strong>Violation Rate</strong> is a composite metric that quantifies the overall risk or non-compliance of a premise by combining two key factors:
</p>

<ol>
  <li><strong>Non-Conformance Intensity (NCI):</strong> Measures the severity of inspection defects, such as poor storage, missing documents, or procedural lapses.</li>
  <li><strong>Product Violation Index (PVI):</strong> Measures the scale and significance of product-related violations, taking into account both quantity/value of products and regulatory weights.</li>
</ol>
<p>
By combining these two, Violation Rate provides a holistic assessment of both the seriousness and magnitude of compliance issues.
</p>

<h6 style="font-weight:bold; margin-top:15px;">Calculation</h6>
<p>
Violation Rate is calculated as a weighted average of NCI and PVI percentages:
</p>
<p>
<strong>Violation Rate = (Weight<sub>NCI</sub> × NCI) + (Weight<sub>PVI</sub> × PVI%)</strong>
</p>

    <h6>Assume NC.I contributes 70% and PVI contributes 30%</h6>
    <p>Violation Rate = (70% × NCI) + (30% × PVI%)</p>
    <ul>
      <li>Absolute Violation Rate: Uses Policy PVI %</li>
      <li>Relative Violation Rate: Uses Observed PVI %</li>
    </ul>

    <h6>8.1 Example: Violation Rates</h6>
    <table border="1" cellpadding="4" cellspacing="0" style="border-collapse:collapse; width:95%; font-size:0.85rem; margin:auto;">
  <thead>
    <tr>
      <th style="border:1px solid #000;">Premise</th>
      <th style="border:1px solid #000;">Avg NCI</th>
      <th style="border:1px solid #000;">A.PVI %</th>
      <th style="border:1px solid #000;">A.VR</th>
      <th style="border:1px solid #000;">R.PVI %</th>
      <th style="border:1px solid #000;">R.VR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border:1px solid #000;">Aba Pharmacy</td>
      <td style="border:1px solid #000;">20</td>
      <td style="border:1px solid #000;">2.9%</td>
      <td style="border:1px solid #000;">15.87</td>
      <td style="border:1px solid #000;">8.5%</td>
      <td style="border:1px solid #000;">16.55</td>
    </tr>
    <tr>
      <td style="border:1px solid #000;">Beta Pharmacy</td>
      <td style="border:1px solid #000;">50</td>
      <td style="border:1px solid #000;">17.6%</td>
      <td style="border:1px solid #000;">38.28</td>
      <td style="border:1px solid #000;">51.1%</td>
      <td style="border:1px solid #000;">50.33</td>
    </tr>
    <tr>
      <td style="border:1px solid #000;">Chole Pharmacy</td>
      <td style="border:1px solid #000;">80</td>
      <td style="border:1px solid #000;">34.6%</td>
      <td style="border:1px solid #000;">64.38</td>
      <td style="border:1px solid #000;">100%</td>
      <td style="border:1px solid #000;">86.00</td>
    </tr>
  </tbody>
</table>

    <h6>9. Key Takeaways</h6>
    <ul>
      <li>✅ NCI measures severity but misses the scale of violations.</li>
      <li>✅ PVI captures both magnitude and regulatory importance of violations.</li>
      <li>✅ Use both Absolute PVI and Relative PVI for a complete risk profile.</li>
      <li>✅ Violation Rate provides a comprehensive compliance score.</li>
      
      <li>✅ Calculations update automatically when adding/editing observations or filtering premises.</li>
    </ul>
  </div>

</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>





<!-- ===== Targets & QA Samples Section ===== -->
<div class="note-card">
  <h3 class="note-title">Targets & QA Sample Management</h3>
  <p class="intro-text">
    This section allows authorized personnel (Champions) to manage annual targets for premises inspected per category
    and the number of QA samples to be screened per QA Centre. These targets serve as reference points for data analysis,
    progressive summary reporting, and inspection planning.
  </p>

  <!-- Targets Image -->
  <img src="{{ url_for('static', filename='images/notes/targets.png') }}"
       alt="Annual Premise Targets and QA Samples"
       class="premises-image">

  <p style="margin-top:15px; font-style:italic; color:#555;">
    Note: Only authorized personnel (Champions) can edit or update targets. These values will be used during data analysis and progressive summary generation.
  </p>
</div>




<!-- ===== Overall Inspection Report Section – Card Style ===== -->
<div class="note-card">
  <!-- Title & Intro -->
  <h3 class="note-title">Overall Inspection Report</h3>
  <p class="intro-text" style="text-align:left;">
    This page displays comprehensive inspection reports conducted in the Zone. It consolidates inspection data, premises details,
    observations identified, actions taken, recalled products, and charges/confiscated values into an interactive table and modal-based summaries.
  </p>

  <!-- Main Image -->
<div style="text-align:center; margin-bottom:40px;">
  <img src="{{ url_for('static', filename='images/notes/overall2.png') }}" 
       alt="Overall Inspection Report Overview" 
       style="width:98%; max-width:none; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); margin-bottom:40px;">
</div>


  <!-- ===== Features Grid ===== -->
  <div class="feature-grid" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px;">

    <!-- Filter Form Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#2980b9;">🔧</div>
        <h4 style="margin:0; color:#2980b9;">Filter Form</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <li><strong>Inspection Type:</strong> Select specific type or “All”</li>
        <li><strong>Region:</strong> Filter inspections by region</li>
        <li><strong>District:</strong> Cascading filter based on region</li>
        <li><strong>Reset Button:</strong> Clears all filters</li>
        <li><strong>Result Badge:</strong> Shows filtered inspection count</li>
      </ul>
    </div>

    <!-- Inspection Summary Table Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#16a085;">📋</div>
        <h4 style="margin:0; color:#16a085;">Inspection Summary Table</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <li>Columns: S/No, Inspection Name, Type, Region, District</li>
        <li>View Summary: Opens modal with detailed data</li>
        <li>Official Report: Upload/download PDF</li>
        <li>Action: Delete inspection record</li>
      </ul>
    </div>

    <!-- Detailed Summary Modal Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#e67e22;">📊</div>
        <h4 style="margin:0; color:#e67e22;">Detailed Summary Modal</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <h6>When user clicks view button a model with following content will appear.
        <li>Premises Inspected: Breakdown by type</li>
        <li>Observations Identified: per premise category and totals</li>
        <li>Actions Taken: Regulatory actions per Observation</li>
        <li>Recalled Products: Brand, batch, MFD/EXP, value, quantity, premises affected</li>
        <li>Charges & Confiscated Values: Total charges per type of product</li>
        <li>Export PDF: Download modal content as PDF</li>
      </ul>
    </div>

    <!-- File Management Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#8e44ad;">📂</div>
        <h4 style="margin:0; color:#8e44ad;">File Management</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <li>Upload official inspection reports</li>
        <li>Download or replace existing reports</li>
        <li>Delete inspection after confirmation</li>
      </ul>
    </div>

    <!-- Dynamic Filtering & Responsive Table Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#27ae60;">⚡</div>
        <h4 style="margin:0; color:#27ae60;">Dynamic Filtering & Responsive Table</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <li>Filters apply in real-time without reload</li>
        <li>Result badge shows filtered inspection count</li>
        <li>Wide tables in modals support horizontal scrolling</li>
      </ul>
    </div>

    <!-- Export PDF Card -->
    <div class="feature-card">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
        <div style="font-size:1.5rem; color:#c0392b;">📥</div>
        <h4 style="margin:0; color:#c0392b;">Export PDF</h4>
      </div>
      <ul style="padding-left:20px; text-align:left; color:#34495e; font-size:0.95rem; line-height:1.5;">
        <li>Modal summaries exported as A4 portrait PDFs</li>
      </ul>
    </div>

  </div>

  <!-- ===== Instructions – Professional Badge Style ===== -->
  <div style="margin-top:40px;">
    <h3 style="color:#2c3e50; font-weight:700; margin-bottom:20px;">Instructions for Use</h3>

    <div style="display:grid; grid-template-columns:1fr; gap:20px;">

      <div class="feature-card" style="display:flex; gap:15px; align-items:flex-start; padding:15px;">
        <div style="background:#2980b9; color:#fff; font-weight:700; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center;">1</div>
        <div><strong>Filtering Inspections:</strong> Select Inspection Type, Region, or District from dropdowns. Table updates automatically. Total Results badge shows filtered count. Click Reset to clear filters.</div>
      </div>

      <div class="feature-card" style="display:flex; gap:15px; align-items:flex-start; padding:15px;">
        <div style="background:#16a085; color:#fff; font-weight:700; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center;">2</div>
        <div><strong>Viewing Inspection Details:</strong> Click View in “View Summary” column. A modal pops up showing premises inspected, observations, actions, recalled products, and charges/confiscated values. Scroll if content is long.</div>
      </div>

      <div class="feature-card" style="display:flex; gap:15px; align-items:flex-start; padding:15px;">
        <div style="background:#e67e22; color:#fff; font-weight:700; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center;">3</div>
        <div><strong>Exporting Summary to PDF:</strong> In the modal, click Export PDF button. Modal content is downloaded as PDF.</div>
      </div>

      <div class="feature-card" style="display:flex; gap:15px; align-items:flex-start; padding:15px;">
        <div style="background:#8e44ad; color:#fff; font-weight:700; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center;">4</div>
        <div><strong>Official Report Upload/Download:</strong> If no report exists, click Upload to submit a PDF. If report exists, download via Download button or replace using pen icon.</div>
      </div>

      <div class="feature-card" style="display:flex; gap:15px; align-items:flex-start; padding:15px;">
        <div style="background:#c0392b; color:#fff; font-weight:700; border-radius:50%; width:35px; height:35px; display:flex; align-items:center; justify-content:center;">5</div>
        <div><strong>Deleting an Inspection:</strong> Click trash icon in Action column. Confirm deletion. Inspection row and related data removed from server.</div>
      </div>

    </div>
  </div>
</div>




<div class="note-card">
  <!-- Title & Intro -->
  <h3 class="note-title">Time-Based Summary Page – Overview & Key Features</h3>
  <p class="intro-text">
    The <strong>Time-Based Summary Page</strong> provides a comprehensive view of inspection activities within a selected time period.
    It helps users monitor progress, make decisions, and track performance over time while combining editable sections, visual summaries,
    and exportable reports for effective inspection management.
  </p>

  <!-- Features Grid -->
  <div class="feature-grid">

    <!-- Date Range Selection -->
    <div class="feature-card">
      <div class="feature-icon">📅</div>
      <div class="feature-title">Date Range Selection</div>
      <div>Filter inspection records by period ie Bi-weekly, month, quarter, annual financial year. The page automatically bring result of filtered period.</div>
    </div>

    <!-- Inspection Totals -->
    <div class="feature-card">
      <div class="feature-icon">📊</div>
      <div class="feature-title">Inspection Totals</div>
      <div>View total inspections conducted and breakdown by type: Routine, Special, Follow-up, Medical Device, Recall, and Port of Entry.</div>
    </div>

    <!-- Premises Coverage -->
    <div class="feature-card">
      <div class="feature-icon">🏢</div>
      <div class="feature-title">Premises Coverage by Category</div>
      <div>See number of premises inspected per category such as dispensaries, pharmacies, hospitals, and medical labs.</div>
    </div>

    <!-- Action Taken -->
    <div class="feature-card">
      <div class="feature-icon">✏️</div>
      <div class="feature-title">Action Taken (Editable)</div>
      <div>Record and update actions taken during inspections, ensuring proper follow-ups and corrective measures.</div>
    </div>

    <!-- QA & Disposal -->
    <div class="feature-card">
      <div class="feature-icon">✅</div>
      <div class="feature-title">Quality Assurance & Disposal (Editable)</div>
      <div>Log QA findings or follow-ups and track product disposal (type, quantity, method) with editable fields.</div>
    </div>

    <!-- Progressive Tracking -->
    <div class="feature-card">
      <div class="feature-icon">📈</div>
      <div class="feature-title">Progressive Tracking Table</div>
      <div>Monitor premises inspected, cumulative inspections, targets, and achievement percentages over time.</div>
    </div>

    <!-- Visual Distribution -->
    <div class="feature-card">
      <div class="feature-icon">📊</div>
      <div class="feature-title">Visual Distribution</div>
      <div>Quickly understand inspection coverage by premise category or type through charts and graphs.</div>
    </div>

    <!-- Export & Reporting -->
    <div class="feature-card">
      <div class="feature-icon">📥</div>
      <div class="feature-title">Export & Reporting</div>
      <div>Export time-based reports as  PDF for reference in preparing official Reports.</div>
    </div>

  </div>

 
<!-- ===== Time-Based Summary Images – Full Size ===== -->
<div class="note-card">
  <div class="sub-section" style="font-weight:600; font-size:1.3rem; color:#333; margin-bottom:20px; text-align:center;">
    Time-Based Summary – Visuals
  </div>

  <div class="image-grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px; justify-items:center;">

    <img src="{{ url_for('static', filename='images/notes/time2.png') }}" 
         alt="Time2" 
         style="width:100%; max-width:800px; border-radius:12px; border:1px solid #ddd; box-shadow:0 3px 10px rgba(0,0,0,0.1);">

    <img src="{{ url_for('static', filename='images/notes/time3.png') }}" 
         alt="Time3" 
         style="width:100%; max-width:800px; border-radius:12px; border:1px solid #ddd; box-shadow:0 3px 10px rgba(0,0,0,0.1);">

    <img src="{{ url_for('static', filename='images/notes/time5.png') }}" 
         alt="Time5" 
         style="width:100%; max-width:800px; border-radius:12px; border:1px solid #ddd; box-shadow:0 3px 10px rgba(0,0,0,0.1);">

  </div>
</div>


</div>










<!-- ===== Defects Table Explanation Card with Top and Bottom Images ===== -->
<div class="note-card" style="margin-top:20px;">
  <div class="feature-grid" style="display: flex; gap: 20px; flex-wrap: wrap; align-items: stretch;">

    <!-- Left Column: Two Images (top and bottom) -->
    <div style="flex: 1 1 300px; min-width: 250px; display:flex; flex-direction:column; justify-content:space-between; align-items:center;">
      
      <!-- Top Tall Image -->
      <img src="{{ url_for('static', filename='images/notes/risk2.png') }}"
           alt="Risk Analysis Visualization"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd; object-fit:cover;">
      
      <!-- Bottom Small Image pinned to bottom -->
      <img src="{{ url_for('static', filename='images/notes/risk7.png') }}"
           alt="Additional Risk Analysis"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd; object-fit:cover; margin-top:20px;">
    </div>

    <!-- Right Column: Explanation Card -->
    <div style="flex: 1 1 500px; min-width: 300px; display:flex; align-items:stretch;">
      <div class="feature-card" style="height:100%; padding:20px; text-align:left; display:flex; flex-direction:column; justify-content:flex-start;">
        <div class="feature-title" style="font-size:1.2rem; font-weight:600; margin-bottom:10px;">
          🔎 Understanding Observation Identified Table
        </div>

        <div style="font-size:0.95rem; line-height:1.6; color:#333; text-align:left;">
          <!-- Purpose -->
          <h6 style="margin-top:10px; font-weight:600;">1. What the Observation Identifid Table Does</h6>
          <p>
            The <strong>Observation Identified Table</strong> function dynamically builds an interactive
            <strong>Defects Table</strong> for inspections based on filtered data.
          </p>
          <ul>
            <li>
              <strong>Main Purpose:</strong> Show Observation per premise type across inspections.
              Allows switching between PREMISE WITH SUCH OBSERVATION VS the following :
              <ul style="margin-top:5px;">
                <li>Total Premises <strong>Inspected</strong></li>
                <li>Total Premises <strong>Registered</strong></li>
                <li><strong>Non-Compliant</strong> Premises</li>
              </ul>
              Displays both <strong>Total counts</strong> and <strong>percentages</strong> for each result.
            </li>
          </ul>

          <!-- Workflow -->
          <h6 style="margin-top:15px; font-weight:600;">⚙️ Step-by-Step Workflow</h6>
          <ol style="margin-left:20px;">
            <li><strong>Filter inspections:</strong> Uses Region/District; shows “No inspections” if none match.</li>
            <li><strong>Fetch registered premises:</strong> The system will check registered premises per category and place as applied filter.</li>
            <li><strong>Identify premises & Observation:</strong> Builds lists of premise categories and Observation types.</li>
            <li><strong>Build table structure:</strong> Header rows, dropdown selector, count & percentage columns.</li>
            <li><strong>Build rows per defect:</strong> Each  Observation shows counts & percentages per premise type; totals column at end.</li>
            <li><strong>Totals row:</strong> Updates dynamically based on dropdown selection.</li>
            <li><strong>Interactivity:</strong> Dropdown triggers instant recalculation.</li>
          </ol>

          <!-- How to Use -->
          <h6 style="margin-top:15px; font-weight:600;">📝 How to Use the Defects Table</h6>
          <ol style="margin-left:20px;">
            <li><strong>Apply filters:</strong> Select Region/District to refine data.</li>
            <li><strong>Understand layout:</strong> Rows =  Observations; Columns = premise types; Cells = count & %.</li>
            <li><strong>Switch reference mode:</strong> Choose Inspected, Registered, or Non-Compliance via dropdown.ie compute comparison eg Premise with GOT MEDICINES VS total premise registered/Total premise inspected/Total premise inspected and identified to have observations.</li>
            <li><strong>Read totals:</strong> Last column shows grand totals; green TOTAL row reflects selected mode.</li>
          </ol>

          <!-- Why It's Useful -->
          <h6 style="margin-top:15px; font-weight:600;">📊 Why It’s Useful</h6>
          <ul style="margin-left:18px;">
            <li>Compares Observations across different premise categories.</li>
            <li>Displays both absolute counts and relative percentages.</li>
            <li>Allows fair comparison between districts/regions of different sizes.</li>
            <li>Helps user to identify high-risk observation,its frequency and problematic premises type affected.</li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>




<!-- ===== Defects Chart Explanation Card ===== -->
<div class="note-card" style="margin-top:20px;">
  <div class="feature-grid" style="display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-start;">

    <!-- Left Column: Explanation -->
    <div style="flex: 1 1 500px; min-width: 300px;">
      <div class="feature-card" style="height:100%; padding:20px;">
        <div class="feature-title" style="font-size:1.2rem; font-weight:600; margin-bottom:10px;">
          🔎 Overview: What the Chart Does
        </div>

        <div style="font-size:0.95rem; line-height:1.6; color:#333; text-align:left;">
          <p>
            The <strong>Obsrvation identified chart</strong>creates an interactive bar chart that helps users visualize inspection data in two main ways:
          </p>
          <ul>
            <li><strong>Average Non-Conformance Intensity</strong> – shows how severe issues are across premises or regions.</li>
            <li><strong>Number of Observation identified</strong> – displays total Observation counts, either across all observation category or for a specific observation category.</li>
          </ul>
          <p>
            The chart is dynamic: it automatically updates whenever the user changes any of the filters, including region, district, group-by mode, or Observation type. It provides a quick, visual insight into where problems are most frequent or severe, enabling inspection teams and managers to focus their follow-up actions efficiently.
          </p>

          <h6 style="margin-top:15px; font-weight:600;">⚙️ Two Modes of Operation</h6>
          <ul>
            <li><strong>Intensity Mode (selected Observation = 'intensity')</strong>
              <ul>
                <li>Uses inspection Data and filters by Region/District if applied.</li>
                <li>Groups data by Premise Category, Region, or District.</li>
                <li>Calculates average intensity score per group.</li>
                <li>Final result: chart showing average non-conformance intensity (%) per group.</li>
              </ul>
            </li>
            <li><strong>Normal Observation  Mode (selected Observation = 'all' or a specific Observation)</strong>
              <ul>
                <li>Uses inspection data, filters by Region/District.</li>
                <li>Groups defects by Premise Type, Region, or District.</li>
                <li>Counts total observation for all or a specific category.</li>
                <li>Final result: chart showing total observation counts per group.</li>
              </ul>
            </li>
          </ul>

          <h6 style="margin-top:15px; font-weight:600;">🎨 Chart Appearance & Features</h6>
          <ul>
            <li>Type: Bar chart</li>
            <li>X-axis: Group index (1, 2, 3, …)</li>
            <li>Y-axis: Average intensity % (intensity mode) or total Observation (normal mode)</li>
            <li>Legend: Shows dynamic category labels (Premise Types, Regions, Districts)</li>
            <li>Colors: Distinct palette colours for better visualization</li>
            <li>Tooltips: On hover, shows Group name & Value</li>
          </ul>

          <h6 style="margin-top:15px; font-weight:600;">🧭 Workflow</h6>
          <ol>
            <li>User selects filters (Observation type, group-by, region, district)</li>
            <li>Function processes data depending on mode</li>
            <li>Calculates averages (intensity) or totals (Observation)</li>
            <li>Builds bar chart</li>
            <li>Adds custom legend + tooltips for clarity</li>
          </ol>

          <h6 style="margin-top:15px; font-weight:600;">🎯 Purpose</h6>
          <ul>
            <li>Where are the most observation found (and of what type)?</li>
            <li>How severe are the issues in different categories/locations?</li>
            <li>Helps inspectors/managers identify hotspot premises, districts, or regions for follow-up actions.</li>
          </ul>

        </div>
      </div>
    </div>

    <!-- Right Column: 4 Vertically Stacked Images -->
    <div style="flex: 1 1 300px; min-width: 250px; display:flex; flex-direction:column; gap:15px; align-items:center;">
      <img src="{{ url_for('static', filename='images/notes/chart2.png') }}"
           alt="Defects Chart Visualization 1"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd;">
      <img src="{{ url_for('static', filename='images/notes/chart3.png') }}"
           alt="Defects Chart Visualization 2"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd;">
      <img src="{{ url_for('static', filename='images/notes/chart4.png') }}"
           alt="Defects Chart Visualization 3"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd;">
      <img src="{{ url_for('static', filename='images/notes/chart5.png') }}"
           alt="Defects Chart Visualization 4"
           style="width:100%; max-width:400px; border-radius:12px; box-shadow:0 3px 10px rgba(0,0,0,0.15); border:1px solid #ddd;">
    </div>

  </div>
</div>




<!-- ===== Risk Summary Section ===== -->
<div class="note-card" style="margin-top: 25px; width: 100%; box-sizing: border-box;">
  <div class="feature-grid" style="display: flex; gap: 20px; flex-wrap: wrap; align-items: stretch;">

    <!-- ================= LEFT COLUMN: Two Vertically Stacked Images ================= -->
    <div style="flex: 1 1 300px; min-width: 250px; display: flex; flex-direction: column; justify-content: space-between; align-items: center;">

      <!-- Top Image -->
      <img src="{{ url_for('static', filename='images/notes/summary2.png') }}"
           alt="Risk Summary Visualization 1"
           style="width: 100%; max-width: 400px; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.15); border: 1px solid #ddd; object-fit: cover; margin-bottom: 20px;">
        
      <!-- Bottom Image -->
      <img src="{{ url_for('static', filename='images/notes/summary3.png') }}"
           alt="Risk Summary Visualization 2"
           style="width: 100%; max-width: 400px; border-radius: 12px; box-shadow: 0 3px 10px rgba(0,0,0,0.15); border: 1px solid #ddd; object-fit: cover;">
    </div>

    <!-- ================= RIGHT COLUMN: Text Card ================= -->
    <div style="flex: 1 1 500px; min-width: 300px; display: flex; align-items: stretch;">
      <div class="feature-card" style="height: 100%; padding: 20px; text-align: left; display: flex; flex-direction: column; justify-content: flex-start;">

        <!-- Heading -->
        <h3 class="note-title" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 15px; color: #2c3e50;">
          📌 Risk Summary
        </h3>

        <!-- Intro Text -->
        <p style="line-height: 1.6; color: #333; margin-bottom: 15px;">
          The section works by generating a <strong>risk-based summary</strong> for inspections.
          It identifies <strong>high-risk districts</strong> based on three main factors:
        </p>

        <!-- Key Bullets -->
        <ul style="margin-left: 20px; line-height: 1.6; margin-bottom: 15px;">
          <li><strong>Violation Rates</strong> — How many non-compliances are observed per district.</li>
          <li><strong>Premise Coverage</strong> — The percentage of registered premises actually inspected.</li>
          <li><strong>Number of Inspections Conducted</strong> — Volume of inspection activities per district.</li>
        </ul>

        <!-- Extra Features -->
        <p style="line-height: 1.6; color: #333; margin-bottom: 20px;">
          <strong>
            The section also provides a narrative summary highlighting the top risk districts with interactive district buttons for detailed follow-up.
            It also includes a modal displaying tables for suggested premises for follow-up, pending areas that need inspections, 
            a mini chart visualizing violation rates, inspections, and coverage, and highlights low coverage locations (wards).
          </strong>
        </p>

        <!-- Workflow -->
        <h4 style="color: #34495e; margin-bottom: 8px;">⚙️ Step-by-Step Workflow</h4>
        <ol style="margin-left: 20px; line-height: 1.6; margin-bottom: 20px;">
          <li><strong>Collect Violation Data</strong> → Gather violation counts per district from inspections.</li>
          <li><strong>Identify Top 7 Districts</strong> → Rank districts based on highest violation rates.</li>
          <li><strong>Count Inspections</strong> → Calculate number of inspections per district (from selected 7).</li>
          <li><strong>Fetch Coverage Data</strong> → Get percentage of inspected premises per district (from selected 7).</li>
          <li><strong>Select Top 3 High-Risk Districts</strong>:
            <ul style="margin-top: 5px; margin-left: 20px;">
              <li>Highest violation rates ✅</li>
              <li>Lowest number of inspections ✅</li>
              <li>Lowest premise coverage ✅</li>
            </ul>
          </li>
          <li><strong>Generate Narrative Summary</strong> → Highlights top 3 risky districts and provides actionable insights.</li>
          <li><strong>The Top 3 districts will be Clickable and for each it will open a modal with:</strong>
            <ul style="margin-top: 5px; margin-left: 20px;">
              <li><strong>Suggested Premises</strong> → Top 10 premises with highest violation rates.</li>
              <li><strong>Pending Inspections</strong> → Locations with many uninspected premises (low coverage wards).</li>
              <li><strong>Low Coverage Locations</strong> → Bottom 5 wards with pending inspections (no latest inspection on such wards).</li>
            </ul>
          </li>
          <li><strong>Generate Mini Chart</strong> → Displays violation rates, inspections, and coverage visually.</li>
        </ol>

        <!-- Benefits -->
        <h4 style="color: #34495e; margin-bottom: 8px;">✅ Benefits</h4>
        <ul style="margin-left: 20px; line-height: 1.6;">
          <li>Quickly identifies districts needing urgent attention.</li>
          <li>Combines <strong>violations</strong>, <strong>inspections</strong>, and <strong>coverage</strong> into one view.</li>
          <li>Interactive design allows drill-down into specific premises and locations.</li>
          <li>Supports <strong>data-driven inspection planning</strong> and better resource allocation.</li>
        </ul>

      </div>
    </div>
  </div>
</div>





</body>
</html>
